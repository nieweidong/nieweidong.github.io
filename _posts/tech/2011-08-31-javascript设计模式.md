---
layout: post
modified:
categories: [tech, gonglue]
excerpt:
tags: [JS, 前端攻略]
image:
  feature:
  credit: 网络
  creditlink: javascript:;
---
<div id="cnblogs_post_body"><p>&#12288;&#12288;一直都在考虑这个月分享大家什么东西最好，原计划是打算写一些HTML5中JS方面的内容或者是AJAX方面的，可是自己由于表达能力，时间，还有个人工作方面的问题，这个还是等下个月再做分享吧^.^。</p>
<p>&#12288;&#12288;老规矩，开始正文以前先交代自己写这篇文章的目的和一些注意事项：</p>
<p>&#12288;&#12288;1.首先本人一直从事前端开发，所以除了JavaScript其他的语言了解不深，所以文章只会以JavaScript语言的角度去论证；</p>
<p>&#12288;&#12288;2.其实我个人在项目用过的模式也不多，对模式的概念的理解也没有那么抽象，所以最近在面试中如果面试官问到与模式相关的问题，自己感觉在对答过程中很郁闷，很多东西表达不清楚，于是就找了些相关资料，才会有这篇文章分享；</p>
<p>&#12288;&#12288;3.JavaScript模式与前端的工作和成长密不可分，因为这确实不是一个简单的话题，所以我只能尽力用简单表达和例子阐明，而且园子里有很多的高手，所以希望大家踊跃发言(由于水平有限，请大家多多指教，希望嘴下留情)；</p>
<p>&#12288;&#12288;4.由于这篇文章更多的只是想起到一个介绍和讲解的作用，并不打算对每种模式进行细致的分析，所以每种模式只用到一个至二个例子，可能会造成这个例子的表达并不是最优的或者不够全面，如果各位看官觉得不过瘾，可以再去查找相关资料；</p>
<p>&#12288;&#12288;5.做任何事都需要坚持，写博客也是一样，嘿嘿，每月至少一篇(文章确实较长，希望能对朋友们有所帮助，<span style="background-color: #dee6ff; font-size: 16px;"><strong>重点部分在前言中有介绍，大家可以选择感兴趣的模式进行深入</strong></span>)。</p>
<p>&#12288;&#12288;6.欢迎转载，不过请注明出处，谢谢。<br>&nbsp;</p>
<p><span style="background-color: #ccffcc; color: #000000;"><strong><span style="font-size: 16px;">了解JavaScript设计模式我们需要知道的一些必要知识点：（内容相对基础，高手请跳过）</span></strong></span></p>
<p>&#12288;&#12288;<span style="color: #3366ff; font-size: 16px;"><strong>闭包：</strong></span>关于闭包这个月在园子里有几篇不错的分享了，在这我也从最实际的地方出发，说说我的理解。</p>
<p>&#12288;&#12288;&#12288;&#12288;1.闭包最常用的方式就是返回一个<strong>内联函数</strong>（何为内联函数？就是在函数内部声明的函数）；</p>
<p>&#12288;&#12288;&#12288;&#12288;2.在JavaScript中有作用域和执行环境的问题，在函数内部的变量在函数外部是无法访问的，在函数内部却可以得到全局变量。由于种种原因，我们有时候需要得到函数内部的变量，可是用常规方法是得不到的，这时我们就可以创建一个闭包，用来在外部访问这个变量。</p>
<p>&#12288;&#12288;&#12288;&#12288;3.闭包的用途 主要就是上一点提到的读取函数内部变量，还有一个作用就是可以使这些变量一直保存在内存中。</p>
<p>&#12288;&#12288;&#12288;&#12288;4.使用闭包要注意，由于变量被保存在内存中，所以会对内存造成消耗，所以不能滥用闭包。解决方法是 在退出函数之前，将不使用的局部变量全部删除。</p>
<p>&#12288;&#12288;&#12288;&#12288;最后还是上一套闭包的代码吧，这样更直观。</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #0000ff;">function</span><span style="color: #000000;"> f(){<br></span><span style="color: #008080;"> 2</span> <span style="color: #000000;">  &#12288;&#12288;</span><span style="color: #0000ff;">var</span><span style="color: #000000;"> n </span><span style="color: #000000;">= </span><span style="color: #000000;">999</span><span style="color: #000000;">;<br></span><span style="color: #008080;"> 3</span> <span style="color: #000000;">  &#12288;&#12288;</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> f1(){<br></span><span style="color: #008080;"> 4</span> <span style="color: #000000;">   &#12288;&#12288; alert(n</span><span style="color: #000000;">+=</span><span style="color: #000000;">1</span><span style="color: #000000;">);<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;"> &#12288;&#12288; }<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;"> &#12288;&#12288; </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> f1;<br></span><span style="color: #008080;"> 7</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;"> 8</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> result </span><span style="color: #000000;">= </span><span style="color: #000000;">f();<br></span><span style="color: #008080;"> 9</span> &#12288;&#12288;<span style="color: #000000;">result(); </span><span style="color: #008000;">//</span><span style="color: #008000;"> 1000</span><span style="color: #008000;"><br></span><span style="color: #008080;">10</span> &#12288;&#12288;<span style="color: #000000;">result(); </span><span style="color: #008000;">//</span><span style="color: #008000;"> 1001</span><span style="color: #008000;"><br></span><span style="color: #008080;">11</span> &#12288;&#12288;<span style="color: #000000;">result(); </span><span style="color: #008000;">//</span><span style="color: #008000;"> 1002</span></pre>
</div>
<p><br>&#12288;&#12288;<span style="font-size: 16px;"><strong><span style="color: #3366ff;">封装：</span></strong></span><span style="color: #333333;">通过将一个方法或者属性声明为私用的，可以让对象的实现细节对其他对象保密以降低对象之间的耦合程度，可以保持数据的完整性并对其修改方式加以约束，这样可以是代码更可靠，更易于调试。封装是面向对象的设计的基石。</span></p>
<p><span style="color: #333333;">&#12288;&#12288;尽管JavaScript是一门面向对象的语言，可它并不具备将成员声明为公用或私用的任何内部机制，所以我们只能自己想办法实现这种特性。下面还是通过一套完整的代码去分析，介绍什么是<strong>私有</strong>属性和方法，什么是<strong>特权</strong>属性和方法，什么是<strong>公</strong><strong>有</strong>属性和方法，什么是<strong><span style="font-weight: normal;" class="Apple-style-span"><strong>公</strong></span><span style="font-weight: normal;" class="Apple-style-span"><strong>有</strong></span>静态</strong>属性和方法。</span></p>
<p><span style="color: #333333;"><strong>&#12288;&#12288;私有属性和方法：</strong>函数有作用域，在函数内用var 关键字声明的变量在外部无法访问，私有属性和方法本质就是你希望在对象外部无法访问的变量。</span></p>
<p><span style="color: #333333;"><strong>&#12288;&#12288;特权<strong>属性和方法：</strong></strong>创建属性和方法时使用的this关键字，因为这些方法定义在构造器的作用域中，所以它们可以访问到私有属性和方法；只有那些需要直接访问私有成员的方法才应该被设计为特权方法。</span></p>
<p><span style="color: #333333;"><strong>&#12288;&#12288;共有<strong>属性和方法：</strong></strong>直接链在prototype上的属性和方法，不可以访问</span>构造器内的私有成员，可以访问特权成员，子类会继承所有的共有方法。</p>
<p><span style="color: #333333;"><strong>&#12288;&#12288;共有静态</strong></span><strong><strong>属性和方法：</strong></strong>最好的理解方式就是把它想象成一个命名空间，实际上相当于把构造器作为命名空间来使用。</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #008000;">/*</span><span style="color: #008000;"> -- 封装 -- </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br></span><span style="color: #008080;"> 2</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> _packaging </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;"> 3</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #008000;">//</span><span style="color: #008000;">私有属性和方法</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 4</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">var</span><span style="color: #000000;"> name </span><span style="color: #000000;">=</span><span style="color: #000000;">'</span><span style="color: #000000;">Darren</span><span style="color: #000000;">'</span><span style="color: #000000;">;<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">var</span><span style="color: #000000;"> method1 </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    &#12288;&#12288;  </span><span style="color: #008000;">//</span><span style="color: #008000;">...</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 7</span> <span style="color: #000000;">   &#12288;&#12288;}<br></span><span style="color: #008080;"> 8</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #008000;">//</span><span style="color: #008000;">特权属性和方法</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.title </span><span style="color: #000000;">=</span><span style="color: #000000;">'</span><span style="color: #000000;">JavaScript Design Patterns</span><span style="color: #000000;">'</span><span style="color: #000000;"> ;<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.getName </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">    &#12288;&#12288;  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> name;<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">   &#12288;&#12288;}<br></span><span style="color: #008080;">13</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">14</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">共有静态属性和方法</span><span style="color: #008000;"><br></span><span style="color: #008080;">15</span> &#12288;&#12288;<span style="color: #000000;">_packaging._name </span><span style="color: #000000;">=</span><span style="color: #000000;">'</span><span style="color: #000000;">Darren code</span><span style="color: #000000;">'</span><span style="color: #000000;">;<br></span><span style="color: #008080;">16</span> &#12288;&#12288;<span style="color: #000000;">_packaging.alertName </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">   &#12288;&#12288;alert(_packaging._name);<br></span><span style="color: #008080;">18</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">19</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">共有属性和方法</span><span style="color: #008000;"><br></span><span style="color: #008080;">20</span> &#12288;&#12288;<span style="color: #000000;">_packaging.prototype </span><span style="color: #000000;">=</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">   &#12288;&#12288;init:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #008000;">//</span><span style="color: #008000;">...</span><span style="color: #008000;"><br></span><span style="color: #008080;">23</span> <span style="color: #000000;">   &#12288;&#12288;}<br></span><span style="color: #008080;">24</span> &#12288;&#12288;<span style="color: #000000;">}</span></pre>
</div>
<p><br>&#12288;&#12288;<span style="font-size: 16px;"><strong><span style="color: #3366ff;">继承：</span></strong></span><span style="color: #333333;">继承</span><span style="color: #333333;">本身就是一个抽象的话题，在JavaScript中继承更是一个复杂的话题，因为JavaScript想要实现继承有两种实现方式，分别是类式继承和原型式继承，每种实现的方式都需要采取不少措施，下面本人通过分析例子的方式讲解</span>JavaScript中这个很重要的话题。</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #008000;">/*</span><span style="color: #008000;"> -- 类式继承 -- </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br></span><span style="color: #008080;"> 2</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">先声明一个超类</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 3</span> &#12288;&#12288;<span style="color: #0000ff;">function</span><span style="color: #000000;"> Person(name){<br></span><span style="color: #008080;"> 4</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">this</span><span style="color: #000000;">.name </span><span style="color: #000000;">=</span><span style="color: #000000;"> name;<br></span><span style="color: #008080;"> 5</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;"> 6</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">给这个超类的原型对象上添加方法 getName </span><span style="color: #008000;"><br></span><span style="color: #008080;"> 7</span> &#12288;&#12288;<span style="color: #000000;">Person.prototype.getName </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;"> 8</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.name;<br></span><span style="color: #008080;"> 9</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">10</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">实例化这个超类</span><span style="color: #008000;"><br></span><span style="color: #008080;">11</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> a </span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Person(</span><span style="color: #000000;">'</span><span style="color: #000000;">Darren1</span><span style="color: #000000;">'</span><span style="color: #000000;">)<br></span><span style="color: #008080;">12</span> &#12288;&#12288;<span style="color: #000000;">alert(a.getName());<br></span><span style="color: #008080;">13</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">再声明类</span><span style="color: #008000;"><br></span><span style="color: #008080;">14</span> &#12288;&#12288;<span style="color: #0000ff;">function</span><span style="color: #000000;"> Programmer(name,sex){<br></span><span style="color: #008080;">15</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #008000;">//</span><span style="color: #008000;">这个类中要调用超类Person的构造函数，并将参数name传给它</span><span style="color: #008000;"><br></span><span style="color: #008080;">16</span> <span style="color: #000000;">   &#12288;&#12288;Person.call(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">,name);<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.sex </span><span style="color: #000000;">=</span><span style="color: #000000;"> sex;<br></span><span style="color: #008080;">18</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">19&#12288;&#12288;</span> <span style="color: #008000;">//</span><span style="color: #008000;">这个子类的原型对象等于超类的实例</span><span style="color: #008000;"><br></span><span style="color: #008080;">20</span> &#12288;&#12288;<span style="color: #000000;">Programmer.prototype </span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Person();<br></span><span style="color: #008080;">21</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">因为子类的原型对象等于超类的实例，所以prototype.constructor这个方法也等于超类构造函数，你可以自己测试一下，如果没这一步，alert(Programmer.prototype.constructor)，这个是Person超类的引用，所以要从新赋值为自己本身</span><span style="color: #008000;"><br></span><span style="color: #008080;">22</span> &#12288;&#12288;<span style="color: #000000;">Programmer.prototype.constructor </span><span style="color: #000000;">=</span><span style="color: #000000;"> Programmer;<br></span><span style="color: #008080;">23</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">子类本身添加了getSex 方法</span><span style="color: #008000;"><br></span><span style="color: #008080;">24</span> &#12288;&#12288;<span style="color: #000000;">Programmer.prototype.getSex </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;">25</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.sex;<br></span><span style="color: #008080;">26</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">27</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">实例化这个子类</span><br><span style="color: #008080;">28</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> _m </span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Programmer(</span><span style="color: #000000;">'</span><span style="color: #000000;">Darren2</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">male</span><span style="color: #000000;">'</span><span style="color: #000000;">);<br></span><span style="color: #008080;">29</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">自身的方法</span><span style="color: #008000;"><br></span><span style="color: #008080;">30</span> &#12288;&#12288;<span style="color: #000000;">alert(_m.getSex());<br></span><span style="color: #008080;">31</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">继承超类的方法</span><span style="color: #008000;"><br></span><span style="color: #008080;">32</span> &#12288;&#12288;<span style="color: #000000;">alert(_m.getName());</span></pre>
</div>
<p>&#12288;&#12288;代码都不难，只要对 原型链 有基础就能理解。类式继承模式是JavaScript继承主要的模式，几乎所有用面向对象方式编写的JavaScript代码中都用到了这种继承，又因为在各种流行语言中只有JavaScript使用原型式继承，因此最好还是使用类式继承。可是要熟悉JavaScript语言，原型继承也是我们必须所了解的，至于在项目中是否使用就得看个人编码风格了。</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #008000;">/*</span><span style="color: #008000;"> -- 原型式继承 -- </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br></span><span style="color: #008080;"> 2</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">clone()函数用来创建新的类Person对象</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 3</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> clone </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(obj){<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">var</span><span style="color: #000000;"> _f </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){};<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;">   &#12288;&#12288;</span><strong><span style="color: #008000;">//</span><span style="color: #008000;">这句是原型式继承最核心的地方，函数的原型对象为对象字面量</span></strong><span style="color: #008000;"><br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">   &#12288;&#12288;_f.prototype </span><span style="color: #000000;">=</span><span style="color: #000000;"> obj; <br></span><span style="color: #008080;"> 7</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> _f;<br></span><span style="color: #008080;"> 8</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;"> 9</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">先声明一个对象字面量</span><span style="color: #008000;"><br></span><span style="color: #008080;">10</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> Person </span><span style="color: #000000;">=</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">   &#12288;&#12288;name:</span><span style="color: #000000;">'</span><span style="color: #000000;">Darren</span><span style="color: #000000;">'</span><span style="color: #000000;">,<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">   &#12288;&#12288;getName:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.name;<br></span><span style="color: #008080;">14</span> <span style="color: #000000;">   &#12288;&#12288;}<br></span><span style="color: #008080;">15</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">16</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">不需要定义一个Person的子类，只要执行一次克隆即可</span><span style="color: #008000;"><br></span><span style="color: #008080;">17</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> Programmer </span><span style="color: #000000;">=</span><span style="color: #000000;"> clone(Person);<br></span><span style="color: #008080;">18</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">可以直接获得Person提供的默认值，也可以添加或者修改属性和方法</span><span style="color: #008000;"><br></span><span style="color: #008080;">19</span> &#12288;&#12288;<span style="color: #000000;">alert(Programmer.getName())<br></span><span style="color: #008080;">20</span> &#12288;&#12288;<span style="color: #000000;">Programmer.name </span><span style="color: #000000;">=</span><span style="color: #000000;">'</span><span style="color: #000000;">Darren2</span><span style="color: #000000;">'</span><span style="color: #000000;"><br></span><span style="color: #008080;">21</span> &#12288;&#12288;<span style="color: #000000;">alert(Programmer.getName())<br></span><span style="color: #008080;">22</span> <span style="color: #000000;"><br></span><span style="color: #008080;">23</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">声明子类,执行一次克隆即可</span><span style="color: #008000;"><br></span><span style="color: #008080;">24</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> Someone </span><span style="color: #000000;">=</span><span style="color: #000000;"> clone(Programmer);</span></pre>
</div>
<p><br>&#12288;&#12288;<em><span style="background-color: #ffff00; color: #808080;">------------------------------------------&#12288;&#12288;正文开始了，我是分割线&#12288;&#12288;------------------------------------------</span></em><br>&nbsp;<br><span style="font-size: 14pt; background-color: #ffff99;">&nbsp;&#12288;<strong><span style="color: #339966;">前言：</span></strong></span></p>
<p>&#12288;&#12288;JavaScript设计模式的作用 -&nbsp;提高代码的重用性，可读性，使代码更容易的维护和扩展。</p>
<p>&#12288;&#12288;&nbsp;</p>
<p>&#12288;&#12288;1.单体模式，工厂模式，桥梁模式个人认为这个一个优秀前端必须掌握的模式，对抽象编程和接口编程都非常有好处。</p>
<p>&#12288;&#12288;2.装饰者模式和组合模式有很多相似的地方，它们都与所包装的对象实现同样的接口并且会把任何方法的调用传递给这些对象。装饰者模式和组合模式是本人描述的较吃力的两个模式，我个人其实也没用过，所以查了很多相关资料和文档，请大家海涵。</p>
<p>&#12288;&#12288;3.门面模式是个非常有意思的模式，几乎所有的JavaScript库都会用到这个模式，假如你有逆向思维或者逆向编程的经验，你会更容易理解这个模式（听起来有挑战，其实一接触你就知道这是个很简单的模式）；还有配置器模式得和门面模式一块拿来说，这个模式对现有接口进行包装，合理运用可以很多程度上提高开发效率。这两个模式有相似的地方，所以一块理解的话相信都会很快上手的。</p>
<p>&#12288;&#12288;4.享元模式是一种以优化为目的的模式。</p>
<p>&#12288;&#12288;5.代理模式主要用于控制对象的访问，包括推迟对其创建需要耗用大量计算资源的类得实例化。</p>
<p>&#12288;&#12288;6.观察者模式用于对对象的状态进行观察，并且当它发生变化时能得到通知的方法。用于让对象对事件进行监听以便对其作出响应。观察者模式也被称为“订阅者模式”。</p>
<p>&#12288;&#12288;7.命令模式是对方法调用进行封装的方式，用命名模式可以对方法调用进行参数化和传递，然后在需要的时候再加以执行。</p>
<p>&#12288;&#12288;8.职责链模式用来消除请求的发送者和接收者之间的耦合。<br>&nbsp;<br>&nbsp;</p>
<p><span style="font-size: 14pt; background-color: #ffcc99;">&#12288;&#12288;JavaScript设计模式都有哪些？</span></p>
<p>&#12288;&#12288;<strong><span style="font-size: 16px; color: #3366ff;">单体（Singleton）模式：&nbsp;</span>绝对是JavaScript中最基本最有用的模式。</strong></p>
<p>&#12288;&#12288;单体在JavaScript的有多种用途，<strong>它用来划分命名空间</strong>。可以减少网页中全局变量的数量(在网页中使用全局变量有风险)；可以在多人开发时避免代码的冲突(使用合理的命名空间)等等。</p>
<p>&#12288;&#12288;在中小型项目或者功能中，单体可以用作命名空间把自己的代码组织在一个全局变量名下；在稍大或者复杂的功能中，单体可以用来把相关代码组织在一起以便日后好维护。&#12288;&#12288;</p>
<p>&#12288;&#12288;使用单体的方法就是用一个命名空间包含自己的所有代码的全局对象，示例：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> functionGroup </span><span style="color: #000000;">=</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">2</span> &#12288;&#12288;<span style="color: #000000;">&#12288;&#12288;name:</span><span style="color: #000000;">'</span><span style="color: #000000;">Darren</span><span style="color: #000000;">'</span><span style="color: #000000;">,<br></span><span style="color: #008080;">3</span> &#12288;&#12288;<span style="color: #000000;">&#12288;&#12288;method1:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;">4</span> &#12288;&#12288;<span style="color: #000000;">&#12288;&#12288;&#12288;&#12288;</span><span style="color: #008000;">//</span><span style="color: #008000;">code</span><span style="color: #008000;"><br></span><span style="color: #008080;">5</span> &#12288;&#12288;<span style="color: #000000;">&#12288;&#12288;},<br></span><span style="color: #008080;">6</span> <span style="color: #000000;">&#12288;&#12288;&#12288;&#12288;init:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;">7</span> <span style="color: #000000;">&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;</span><span style="color: #008000;">//</span><span style="color: #008000;">code</span><span style="color: #008000;"><br></span><span style="color: #008080;">8</span> <span style="color: #000000;">&#12288;&#12288;&#12288;&#12288;}<br></span><span style="color: #008080;">9</span> &#12288;&#12288;<span style="color: #000000;">}</span></pre>
</div>
<p>&#12288;&#12288;或者</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> functionGroup  </span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> myGroup(){<br></span><span style="color: #008080;">2</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">this</span><span style="color: #000000;">.name </span><span style="color: #000000;">=</span><span style="color: #000000;">'</span><span style="color: #000000;">Darren</span><span style="color: #000000;">'</span><span style="color: #000000;">;<br></span><span style="color: #008080;">3</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">this</span><span style="color: #000000;">.getName </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;">4</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">return</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.name<br></span><span style="color: #008080;">5</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">6</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">this</span><span style="color: #000000;">.method1 </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){}<br></span><span style="color: #008080;">7</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">...<br></span><span style="color: #008080;">8</span> &#12288;&#12288;<span style="color: #000000;">}</span></pre>
</div>
<p>&#12288;&#12288;&#12288;</p>
<p>&#12288;&#12288;<span style="color: #3366ff; font-size: 16px;"><strong>工厂（Factory）模式：</strong></span><span style="color: #000000;"><strong>提供一个创建一系列相关或相互依赖对象的接口，而无需指定他们具体的类。</strong></span></p>
<p><span style="color: #000000;">&#12288;&#12288;工厂就是把成员对象的创建工作转交给一个外部对象，好处在于消除对象之间的耦合(何为耦合？就是相互影响</span>)。<strong>通过使用工厂方法而不是new关键字及具体类，可以把所有实例化的代码都集中在一个位置</strong>，有助于创建模块化的代码，这才是工厂模式的目的和优势。</p>
<p>&#12288;&#12288;举个例子：你有一个大的功能要做，其中有一部分是要考虑扩展性的，那么这部分代码就可以考虑抽象出来，当做一个全新的对象做处理。好处就是将来扩展的时候容易维护 - 只需要操作这个对象内部方法和属性，达到了动态实现的目的。非常有名的一个示例 - <strong>XHR工厂</strong>：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1&#12288;&#12288;</span> <span style="color: #0000ff;">var</span><span style="color: #000000;"> XMLHttpFactory </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span>(){};&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #008000;">//这是一个简单工厂模式</span><br></span><span style="color: #008080;"> 2</span> &#12288;&#12288;<span style="color: #000000;">XMLHttpFactory.createXMLHttp </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;"> 3&#12288;&#12288;&#12288;&#12288;</span> <span style="color: #0000ff;">var</span><span style="color: #000000;"> XMLHttp </span><span style="color: #000000;">= </span><span style="color: #0000ff;">null</span><span style="color: #000000;">;<br></span><span style="color: #008080;"> 4</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">if</span><span style="color: #000000;"> (window.XMLHttpRequest){<br></span><span style="color: #008080;"> 5</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">XMLHttp </span><span style="color: #000000;">= </span><span style="color: #0000ff;">new</span><span style="color: #000000;"> XMLHttpRequest()<br></span><span style="color: #008080;"> 6&#12288;&#12288;&#12288;&#12288;</span> <span style="color: #000000;">}</span><span style="color: #0000ff;">else</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (window.ActiveXObject){<br></span><span style="color: #008080;"> 7</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">XMLHttp </span><span style="color: #000000;">= </span><span style="color: #0000ff;">new</span><span style="color: #000000;"> ActiveXObject(</span><span style="color: #000000;">"</span><span style="color: #000000;">Microsoft.XMLHTTP</span><span style="color: #000000;">"</span><span style="color: #000000;">)<br></span><span style="color: #008080;"> 8</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">}</span><span style="color: #000000;"><br></span><span style="color: #008080;">10</span> &#12288;&#12288;<span style="color: #0000ff;">return</span><span style="color: #000000;"> XMLHttp;<br></span><span style="color: #008080;">11</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">12</span> &#12288;&#12288;<span style="color: #008000;">//XMLHttpFactory.createXMLHttp()</span><span style="color: #008000;">这个方法根据当前环境的具体情况返回一个XHR对象。</span><span style="color: #008000;"><br></span><span style="color: #008080;">13</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> AjaxHander </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;">14</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> XMLHttp </span><span style="color: #000000;">=</span><span style="color: #000000;"> XMLHttpFactory.createXMLHttp();<br></span><span style="color: #008080;">15</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">...<br></span><span style="color: #008080;">16</span> &#12288;&#12288;<span style="color: #000000;">}</span></pre>
</div>
<p><br>&#12288;&#12288;工厂模式又区分简单工厂模式和抽象工厂模式，上面介绍的是简单工厂模式，这种模式用的更多也更简单易用。抽象工厂模式的使用方法就是 - 先设计一个抽象类，这个类不能被实例化，只能用来派生子类，最后通过对子类的扩展实现工厂方法。 示例：<br><br></p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> XMLHttpFactory </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){};&#12288;     </span><span style="color: #008000;">//</span><span style="color: #008000;">这是一个抽象工厂模式</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 2</span> &#12288;&#12288;<span style="color: #000000;">XMLHttpFactory.prototype </span><span style="color: #000000;">=</span><span style="color: #000000;"> {<br></span><span style="color: #008080;"> 3</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #008000;">//</span><span style="color: #008000;">如果真的要调用这个方法会抛出一个错误，它不能被实例化，只能用来派生子类</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 4</span> <span style="color: #000000;">   &#12288;&#12288;createFactory:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">throw</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Error(</span><span style="color: #000000;">'</span><span style="color: #000000;">This is an abstract class</span><span style="color: #000000;">'</span><span style="color: #000000;">);<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">   &#12288;&#12288;}<br></span><span style="color: #008080;"> 7</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;"> 8</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">派生子类，文章开始处有基础介绍那有讲解继承的模式，不明白可以去参考原理</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 9</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> XHRHandler </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">   &#12288;&#12288;XMLHttpFactory.call(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">);<br></span><span style="color: #008080;">11</span> &#12288;&#12288;<span style="color: #000000;">};<br></span><span style="color: #008080;">12</span> &#12288;&#12288;<span style="color: #000000;">XHRHandler.prototype </span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> XMLHttpFactory();<br></span><span style="color: #008080;">13</span> &#12288;&#12288;<span style="color: #000000;">XHRHandler.prototype.constructor </span><span style="color: #000000;">=</span><span style="color: #000000;"> XHRHandler;<br></span><span style="color: #008080;">14</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">重新定义createFactory 方法</span><span style="color: #008000;"><br></span><span style="color: #008080;">15</span> &#12288;&#12288;<span style="color: #000000;">XHRHandler.prototype.createFactory </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">var</span><span style="color: #000000;"> XMLHttp </span><span style="color: #000000;">=</span><span style="color: #0000ff;">null</span><span style="color: #000000;">;<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (window.XMLHttpRequest){<br></span><span style="color: #008080;">18</span> <span style="color: #000000;">      &#12288;&#12288;XMLHttp </span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> XMLHttpRequest()<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">   &#12288;&#12288;}</span><span style="color: #0000ff;">else</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (window.ActiveXObject){<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">      &#12288;&#12288;XMLHttp </span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> ActiveXObject(</span><span style="color: #000000;">"</span><span style="color: #000000;">Microsoft.XMLHTTP</span><span style="color: #000000;">"</span><span style="color: #000000;">)<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">   &#12288;&#12288;}<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #000000;"> XMLHttp;<br></span><span style="color: #008080;">23</span> &#12288;&#12288;<span style="color: #000000;">}</span></pre>
</div>
<p>&#12288;&#12288;</p>
<p><span style="color: #3366ff; font-size: 16px;"><strong>&#12288;&#12288;桥接（bridge）模式：</strong></span><strong><span style="color: #000000;">在实现API的时候，桥梁模式灰常有用。在所有模式中，这种模式最容易立即付诸实施。</span></strong></p>
<p><span style="color: #000000;">&#12288;&#12288;桥梁模式可以用来弱化它与使用它的类和对象之间的耦合，</span><span style="color: #000000;"><span style="color: #000000;">就是将抽象与其实现隔离开来，以便二者独立变化；这种模式对于JavaScript中常见的时间驱动的编程有很大益处，桥梁模式最常见和实际的应用场合之一是时间监听器回调函数。先分析一个不好的示例：</span></span></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> &#12288;&#12288;<span style="color: #000000;">element.onclick </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;">2</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> setLogFunc();<br></span><span style="color: #008080;">3</span> &#12288;&#12288;<span style="color: #000000;">};</span></pre>
</div>
<p>&nbsp;</p>
<p>&#12288;&#12288;为什么说这个示例不好，因为从这段代码中无法看出那个LogFunc方法要显示在什么地方，它有什么可配置的选项以及应该怎么去修改它。换一种说法就是，桥梁模式的要诀就是让接口“可桥梁”，实际上也就是可配置。把页面中一个个功能都想象成模块，接口可以使得模块之间的耦合降低。</p>
<p>&#12288;&#12288;掌握桥梁模式的正确使用收益的不只是你，还有那些负责维护你代码的人。把抽象于其实现隔离开，可独立地管理软件的各个部分，bug也因此更容易查找。</p>
<p>&#12288;&#12288;桥梁模式目的就是让API更加健壮，提高组件的模块化程度，促成更简洁的实现，并提高抽象的灵活性。一个好的示例：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> &#12288;&#12288;<span style="color: #000000;">element.onclick </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span>(){&#12288;&#12288;<span style="color: #008000;">//API可控制性提高了，使得这个API更加健壮</span><br></span><span style="color: #008080;">2</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> someFunction(element,param,callback);<br></span><span style="color: #008080;">3</span> &#12288;&#12288;<span style="color: #000000;">}</span></pre>
</div>
<p><span style="color: #000000;">&#12288;&#12288;</span><span style="color: #000000;">注：桥梁模式还可以用于连接公开的API代码和私有的实现代码，还可以把多个类连接在一起。在文章封装介绍的部分提到过<strong>特权方法</strong>，也是桥梁模式的一种特例。《JS设计模式》上找的示例，加深大家对这个模式的理解：<br></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">错误的方式</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 2</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">这个API根据事件监听器回调函数的工作机制，事件对象被作为参数传递给这个函数。本例中并没有使用这个参数，而只是从this对象获取ID。</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 3</span> &#12288;&#12288;<span style="color: #000000;">addEvent(element,</span><span style="color: #000000;">'</span><span style="color: #000000;">click</span><span style="color: #000000;">'</span><span style="color: #000000;">,getBeerById);<br></span><span style="color: #008080;"> 4</span> &#12288;&#12288;<span style="color: #0000ff;">function</span><span style="color: #000000;">(e){<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">var</span><span style="color: #000000;"> id </span><span style="color: #000000;">=</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.id;<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">   &#12288;&#12288;asyncRequest(</span><span style="color: #000000;">'</span><span style="color: #000000;">GET</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">beer.url?id=</span><span style="color: #000000;">'</span><span style="color: #000000;">+</span><span style="color: #000000;"> id,</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(resp){<br></span><span style="color: #008080;"> 7</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #008000;">//</span><span style="color: #008000;">Callback response</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 8</span> <span style="color: #000000;">     &#12288;&#12288; console.log(</span><span style="color: #000000;">'</span><span style="color: #000000;">Requested Beer: </span><span style="color: #000000;">'</span><span style="color: #000000;">+</span><span style="color: #000000;"> resp.responseText);<br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">   &#12288;&#12288;});<br></span><span style="color: #008080;">10</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">11</span> <span style="color: #000000;"><br></span><span style="color: #008080;">12</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">好的方式</span><span style="color: #008000;"><br></span><span style="color: #008080;">13</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">从逻辑上分析，把id传给getBeerById函数式合情理的，且回应结果总是通过一个毁掉函数返回。这么理解，我们现在做的是针对接口而不是实现进行编程，用桥梁模式把抽象隔离开来。</span><span style="color: #008000;"><br></span><span style="color: #008080;">14</span> &#12288;&#12288;<span style="color: #0000ff;">function</span><span style="color: #000000;"> getBeerById(id,callback){<br></span><span style="color: #008080;">15</span> <span style="color: #000000;">   &#12288;&#12288;asyncRequest(</span><span style="color: #000000;">'</span><span style="color: #000000;">GET</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">beer.url?id=</span><span style="color: #000000;">'</span><span style="color: #000000;">+</span><span style="color: #000000;"> id,</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(resp){<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">      &#12288;&#12288;callback(resp.responseText)<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">   &#12288;&#12288;});<br></span><span style="color: #008080;">18</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">19</span> &#12288;&#12288;<span style="color: #000000;">addEvent(element,</span><span style="color: #000000;">'</span><span style="color: #000000;">click</span><span style="color: #000000;">'</span><span style="color: #000000;">,getBeerByIdBridge);<br></span><span style="color: #008080;">20</span> &#12288;&#12288;<span style="color: #0000ff;">function</span><span style="color: #000000;"> getBeerByIdBridge(e){<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">   &#12288;&#12288;getBeerById(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.id,</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(beer){<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">      &#12288;&#12288;console.log(</span><span style="color: #000000;">'</span><span style="color: #000000;">Requested Beer: </span><span style="color: #000000;">'</span><span style="color: #000000;">+</span><span style="color: #000000;"> beer);<br></span><span style="color: #008080;">23</span> <span style="color: #000000;">   &#12288;&#12288;});<br></span><span style="color: #008080;">24</span> &#12288;&#12288;<span style="color: #000000;">}</span>&#12288;</pre>
</div>
<p><strong><span style="color: #000000;">&nbsp;</span></strong></p>
<p><span style="color: #3366ff; font-size: 16px;"><strong>&#12288;&#12288;装饰者（Decorator）模式：</strong></span><strong><span style="color: #3366ff;"><span style="color: #333333;">这个模式就是为对象增加功能(或方法)。</span></span></strong></p>
<p><span style="color: #333333;"><strong>&#12288;&#12288;动态地给一个对象添加一些额外的职责。就扩展功能而言，它比生成子类方式更为灵活。</strong></span></p>
<p><span style="color: #333333;"><strong>&#12288;&#12288;装饰者模式和组合模式有很多共同点，它们都与所包装的对象实现统一的接口并且会把任何方法条用传递给这些对象。可是组合模式用于把众多子对象组织为一个整体，而装饰者模式用于在不修改现有对象或从派生子类的前提下为其添加方法。</strong></span></p>
<p><span style="color: #333333;"><strong>&#12288;&#12288;装饰者的运作过程是透明的，这就是说你可以用它包装其他对象，然后继续按之前使用那么对象的方法来使用，从下面的例子中就可以看出。还是从代码中理解吧：</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">创建一个命名空间为myText.Decorations</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 2</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> myText</span><span style="color: #000000;">=</span><span style="color: #000000;"> {};<br></span><span style="color: #008080;"> 3</span> &#12288;&#12288;<span style="color: #000000;">myText.Decorations</span><span style="color: #000000;">=</span><span style="color: #000000;">{};<br></span><span style="color: #008080;"> 4</span> &#12288;&#12288;<span style="color: #000000;">myText.Core</span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(myString){<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.show </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){</span><span style="color: #0000ff;">return</span><span style="color: #000000;"> myString;}<br></span><span style="color: #008080;"> 6</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;"> 7</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">第一次装饰</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 8</span> &#12288;&#12288;<span style="color: #000000;">myText.Decorations.addQuestuibMark </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(myString){<br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.show </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){</span><span style="color: #0000ff;">return</span><span style="color: #000000;"> myString.show()</span><span style="color: #000000;">+</span><span style="color: #000000;">'</span><span style="color: #000000;">?</span><span style="color: #000000;">'</span><span style="color: #000000;">;};<br></span><span style="color: #008080;">10</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">11</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">第二次装饰</span><span style="color: #008000;"><br></span><span style="color: #008080;">12</span> &#12288;&#12288;<span style="color: #000000;">myText.Decorations.makeItalic </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(myString){<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.show </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){</span><span style="color: #0000ff;">return</span><span style="color: #000000;">'</span><span style="color: #000000;">&lt;li&gt;</span><span style="color: #000000;">'</span><span style="color: #000000;">+</span><span style="color: #000000;">myString.show()</span><span style="color: #000000;">+</span><span style="color: #000000;">'</span><span style="color: #000000;">&lt;/li&gt;</span><span style="color: #000000;">'</span><span style="color: #000000;">};<br></span><span style="color: #008080;">14</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">15</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">得到myText.Core的实例</span><span style="color: #008000;"><br></span><span style="color: #008080;">16</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> theString </span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> myText.Core(</span><span style="color: #000000;">'</span><span style="color: #000000;">this is a sample test String</span><span style="color: #000000;">'</span><span style="color: #000000;">);<br></span><span style="color: #008080;">17</span> &#12288;&#12288;<span>alert(theString.show());&#12288;&#12288;<span style="color: #008000;">//output 'this is a sample test String'</span><br></span><span style="color: #008080;">18</span> &#12288;&#12288;<span style="color: #000000;">theString </span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> myText.Decorations.addQuestuibMark(theString);<br></span><span style="color: #008080;">19</span> &#12288;&#12288;<span style="color: #000000;">alert(theString.show());&#12288;&#12288;<span style="color: #008000;">//output 'this is a sample test String?'</span><br></span><span style="color: #008080;">20</span> &#12288;&#12288;<span style="color: #000000;">theString </span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> myText.Decorations.makeItalic (theString);<br></span><span style="color: #008080;">21</span> &#12288;&#12288;<span style="color: #000000;">alert(theString.show());</span><span style="font-family: 'Courier New';" class="Apple-style-span">&#12288;&#12288;<span style="color: #008000;">//output '&lt;li&gt;this is a sample test String&lt;/li&gt;'</span></span></pre>
</div>
<p>&nbsp;</p>
<p>&#12288;&#12288;从这个示例中可以看出，这一切都可以不用事先知道组件对象的接口，甚至可以动态的实现，在为现有对象增添特性这方面，装饰者模式有极大的灵活性。</p>
<p>&#12288;&#12288;如果需要为类增加特性或者方法，而从该类派生子类的解决办法并不实际的话，就应该使用装饰者模式。派生子类之所以会不实际最常见的原因是需要添加的特性或方法的数量要求使用大量子类。</p>
<p>&nbsp;</p>
<p><span style="color: #3366ff; font-size: 16px;"><strong>&nbsp;</strong></span></p>
<p><span style="color: #3366ff; font-size: 16px;"><strong>&#12288;&#12288;组合（Composite）模式：</strong></span><span style="color: #3366ff;"><strong><span style="color: #333333;">将对象组合成树形结构以表示“部分-整体”的层次结构。它使得客户对单个对象和复合对象的使用具有一致性。</span></strong></span></p>
<p><span style="color: #000000;">&#12288;&#12288;组合模式是一种专为创建Web上的动态用户界面而量身定制的模式。使用这种模式，可以用一条命令在多个对象上激发复杂的或递归的行为。组合模式擅长于对大批对象进行操作。</span></p>
<p><span style="color: #000000;">&#12288;&#12288;组合模式的好处：1.程序员可以用同样的方法处理对象的集合与其中的特定子对象；2.它可以用来把一批子对象组织成树形结构，并且使整棵树都可被便利。</span></p>
<p><span style="color: #000000;">&#12288;&#12288;组合模式适用范围：1.</span>存在一批组织成某处层次体系的对象（具体结构可能在开发期间无法知道）；2.<span style="color: #333333; font-family: Arial, Tahoma, Verdana, sans-serif; line-height: 25px;" class="Apple-style-span">希望对这批对象或其中的一部分对象实话一个操作。</span></p>
<p><span style="color: #000000;">&#12288;&#12288;</span>其实组合模式就是将一系列相似或相近的对象组合在一个大的对象，由这个大对象提供一些常用的接口来对这些小对象进行操作，代码可重用，对外操作简单。例如：对form内的元素，不考虑页面设计的情况下，一般就剩下input了，对于这些input都有name和value的属性，因此可以将这些input元素作为form对象的成员组合起来，form对象提供对外的接口，便可以实现一些简单的操作，比如设置某个input的value，添加/删除某个input等等。</p>
<p>&#12288;&#12288;这种模式描述起来比较吃力，我从《JS设计模式》上找个一个实例，大家还是看代码吧：<strong>先创建组合对象类</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;"> DynamicGallery Class</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 2</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> DynamicGallery </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (id) { </span><span style="color: #008000;">//</span><span style="color: #008000;"> 实现Composite，GalleryItem组合对象类 </span><span style="color: #008000;"><br></span><span style="color: #008080;"> 3</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.children </span><span style="color: #000000;">=</span><span style="color: #000000;"> [];<br></span><span style="color: #008080;"> 4</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.element </span><span style="color: #000000;">=</span><span style="color: #000000;"> document.createElement(</span><span style="color: #000000;">'</span><span style="color: #000000;">div</span><span style="color: #000000;">'</span><span style="color: #000000;">);<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.element.id </span><span style="color: #000000;">=</span><span style="color: #000000;"> id;<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.element.className </span><span style="color: #000000;">=</span><span style="color: #000000;">'</span><span style="color: #000000;">dynamic-gallery</span><span style="color: #000000;">'</span><span style="color: #000000;">;<br></span><span style="color: #008080;"> 7</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;"> 8</span> &#12288;&#12288;<span style="color: #000000;">DynamicGallery.prototype </span><span style="color: #000000;">=</span><span style="color: #000000;"> {<br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #008000;">//</span><span style="color: #008000;"> 实现Composite组合对象接口 </span><span style="color: #008000;"><br></span><span style="color: #008080;">10</span> <span style="color: #000000;">   &#12288;&#12288;add: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (child) {<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.children.push(child);<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.element.appendChild(child.getElement());<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">   &#12288;&#12288;},<br></span><span style="color: #008080;">14</span> <span style="color: #000000;">   &#12288;&#12288;remove: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (child) {<br></span><span style="color: #008080;">15</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">var</span><span style="color: #000000;"> node, i </span><span style="color: #000000;">=</span><span style="color: #000000;">0</span><span style="color: #000000;">; node </span><span style="color: #000000;">=</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.getChild(i); i</span><span style="color: #000000;">++</span><span style="color: #000000;">) {<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">         &#12288;&#12288;</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (node </span><span style="color: #000000;">==</span><span style="color: #000000;"> child) {<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">            &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.children.splice(i, </span><span style="color: #000000;">1</span><span style="color: #000000;">);<br></span><span style="color: #008080;">18</span> <span style="color: #000000;">           &#12288;&#12288; </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">         &#12288;&#12288;}<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">      &#12288;&#12288;}<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.element.removeChild(child.getElement());<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">   &#12288;&#12288;},<br></span><span style="color: #008080;">23</span> <span style="color: #000000;">   &#12288;&#12288;getChild: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (i) {<br></span><span style="color: #008080;">24</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.children[i];<br></span><span style="color: #008080;">25</span> <span style="color: #000000;">   &#12288;&#12288;},<br></span><span style="color: #008080;">26</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #008000;">//</span><span style="color: #008000;"> 实现DynamicGallery组合对象接口 </span><span style="color: #008000;"><br></span><span style="color: #008080;">27</span> <span style="color: #000000;">   &#12288;&#12288;hide: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {<br></span><span style="color: #008080;">28</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">var</span><span style="color: #000000;"> node, i </span><span style="color: #000000;">=</span><span style="color: #000000;">0</span><span style="color: #000000;">; node </span><span style="color: #000000;">=</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.getChild(i); i</span><span style="color: #000000;">++</span><span style="color: #000000;">) {<br></span><span style="color: #008080;">29</span> <span style="color: #000000;">         &#12288;&#12288;node.hide();<br></span><span style="color: #008080;">30</span> <span style="color: #000000;">      &#12288;&#12288;}<br></span><span style="color: #008080;">31</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.element.style.display </span><span style="color: #000000;">=</span><span style="color: #000000;">'</span><span style="color: #000000;">none</span><span style="color: #000000;">'</span><span style="color: #000000;">;<br></span><span style="color: #008080;">32</span> <span style="color: #000000;">   &#12288;&#12288;},<br></span><span style="color: #008080;">33</span> <span style="color: #000000;">   &#12288;&#12288;show: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {<br></span><span style="color: #008080;">34</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.element.style.display </span><span style="color: #000000;">=</span><span style="color: #000000;">'</span><span style="color: #000000;">block</span><span style="color: #000000;">'</span><span style="color: #000000;">;<br></span><span style="color: #008080;">35</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">var</span><span style="color: #000000;"> node, i </span><span style="color: #000000;">=</span><span style="color: #000000;">0</span><span style="color: #000000;">; node </span><span style="color: #000000;">=</span><span style="color: #000000;"> getChild(i); i</span><span style="color: #000000;">++</span><span style="color: #000000;">) {<br></span><span style="color: #008080;">36</span> <span style="color: #000000;">         &#12288;&#12288;node.show();<br></span><span style="color: #008080;">37</span> <span style="color: #000000;">      &#12288;&#12288;}<br></span><span style="color: #008080;">38</span> <span style="color: #000000;">   &#12288;&#12288;},<br></span><span style="color: #008080;">39</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #008000;">//</span><span style="color: #008000;"> 帮助方法 </span><span style="color: #008000;"><br></span><span style="color: #008080;">40</span> <span style="color: #000000;">   &#12288;&#12288;getElement: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {<br></span><span style="color: #008080;">41</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.element;<br></span><span style="color: #008080;">42</span> <span style="color: #000000;">   &#12288;&#12288;}<br></span><span style="color: #008080;">43</span> &#12288;&#12288;<span style="color: #000000;">}</span></pre>
</div>
<p>&#12288;&#12288;再创建叶对象类</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> GalleryImage </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (src) { </span><span style="color: #008000;">//</span><span style="color: #008000;"> 实现Composite和GalleryItem组合对象中所定义的方法 </span><span style="color: #008000;"><br></span><span style="color: #008080;"> 2</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.element </span><span style="color: #000000;">=</span><span style="color: #000000;"> document.createElement(</span><span style="color: #000000;">'</span><span style="color: #000000;">img</span><span style="color: #000000;">'</span><span style="color: #000000;">);<br></span><span style="color: #008080;"> 3</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.element.className </span><span style="color: #000000;">=</span><span style="color: #000000;">'</span><span style="color: #000000;">gallery-image</span><span style="color: #000000;">'</span><span style="color: #000000;">;<br></span><span style="color: #008080;"> 4</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.element.src </span><span style="color: #000000;">=</span><span style="color: #000000;"> src;<br></span><span style="color: #008080;"> 5</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;"> 6</span> &#12288;&#12288;<span style="color: #000000;">GalleryImage.prototype </span><span style="color: #000000;">=</span><span style="color: #000000;"> {<br></span><span style="color: #008080;"> 7</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #008000;">//</span><span style="color: #008000;"> 实现Composite接口 </span><span style="color: #008000;"><br></span><span style="color: #008080;"> 8</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #008000;">//</span><span style="color: #008000;"> 这些是叶结点，所以我们不用实现这些方法，我们只需要定义即可 </span><span style="color: #008000;"><br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">   &#12288;&#12288;add: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () { },<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">   &#12288;&#12288;remove: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () { },<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">   &#12288;&#12288;getChild: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () { },<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #008000;">//</span><span style="color: #008000;"> 实现GalleryItem接口 </span><span style="color: #008000;"><br></span><span style="color: #008080;">13</span> <span style="color: #000000;">   &#12288;&#12288;hide: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {<br></span><span style="color: #008080;">14</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.element.style.display </span><span style="color: #000000;">=</span><span style="color: #000000;">'</span><span style="color: #000000;">none</span><span style="color: #000000;">'</span><span style="color: #000000;">;<br></span><span style="color: #008080;">15</span> <span style="color: #000000;">   &#12288;&#12288;},<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">   &#12288;&#12288;show: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.element.style.display </span><span style="color: #000000;">=</span><span style="color: #000000;">''</span><span style="color: #000000;">;<br></span><span style="color: #008080;">18</span> <span style="color: #000000;">   &#12288;&#12288;},<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #008000;">//</span><span style="color: #008000;"> 帮助方法 </span><span style="color: #008000;"><br></span><span style="color: #008080;">20</span> <span style="color: #000000;">   &#12288;&#12288;getElement: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.element;<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">   &#12288;&#12288;}<br></span><span style="color: #008080;">23</span> &#12288;&#12288;<span style="color: #000000;">} </span></pre>
</div>
<p>&#12288;&#12288;<span style="color: #333333; font-family: Arial, Tahoma, Verdana, sans-serif; line-height: 25px;" class="Apple-style-span">现在我们可以使用这两个类来管理图片：</span></p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> topGallery </span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> DynamicGallery(</span><span style="color: #000000;">'</span><span style="color: #000000;">top-gallery</span><span style="color: #000000;">'</span><span style="color: #000000;">); <br></span><span style="color: #008080;"> 2</span> &#12288;&#12288;<span style="color: #000000;">topGallery.add(</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> GalleryImage(</span><span style="color: #000000;">'</span><span style="color: #000000;">/img/image-1.jpg</span><span style="color: #000000;">'</span><span style="color: #000000;">)); <br></span><span style="color: #008080;"> 3</span> &#12288;&#12288;<span style="color: #000000;">topGallery.add(</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> GalleryImage(</span><span style="color: #000000;">'</span><span style="color: #000000;">/img/image-2.jpg</span><span style="color: #000000;">'</span><span style="color: #000000;">)); <br></span><span style="color: #008080;"> 4</span> &#12288;&#12288;<span style="color: #000000;">topGallery.add(</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> GalleryImage(</span><span style="color: #000000;">'</span><span style="color: #000000;">/img/image-3.jpg</span><span style="color: #000000;">'</span><span style="color: #000000;">)); <br></span><span style="color: #008080;"> 5</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> vacationPhotos </span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> DyamicGallery(</span><span style="color: #000000;">'</span><span style="color: #000000;">vacation-photos</span><span style="color: #000000;">'</span><span style="color: #000000;">); <br></span><span style="color: #008080;"> 6</span> &#12288;&#12288;<span style="color: #0000ff;">for</span><span style="color: #000000;">(</span><span style="color: #0000ff;">var</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;">0</span><span style="color: #000000;">, i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">30</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">){ <br></span><span style="color: #008080;"> 7</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">vacationPhotos.add(</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> GalleryImage(</span><span style="color: #000000;">'</span><span style="color: #000000;">/img/vac/image-</span><span style="color: #000000;">'</span><span style="color: #000000;">+</span><span style="color: #000000;"> i </span><span style="color: #000000;">+</span><span style="color: #000000;">'</span><span style="color: #000000;">.jpg</span><span style="color: #000000;">'</span><span style="color: #000000;">)); <br></span><span style="color: #008080;"> 8</span> &#12288;&#12288;<span style="color: #000000;">} <br></span><span style="color: #008080;"> 9</span> &#12288;&#12288;<span style="color: #000000;">topGallery.add(vacationPhotos); <br></span><span style="color: #008080;">10</span> &#12288;&#12288;<span style="color: #000000;">topGallery.show(); <br></span><span style="color: #008080;">11</span> &#12288;&#12288;<span style="color: #000000;">vacationPhotos.hide(); </span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #3366ff; font-size: 16px;"><strong>&#12288;&#12288;门面（facade）模式：门面模式是几乎所有JavaScript库的核心原则<br></strong></span><span style="color: #3366ff;"><span style="color: #333333;">&#12288;&#12288;子系统中的一组接口提供一个一致的界面，门面模式定义了一个高层接口，这个接口使得这一子系统更加容易使用，简单的说这是一种组织性的模式，它可以用来修改类和对象的接口，使其更便于使用。</span></span></p>
<p><span style="color: #3366ff;"><span style="color: #333333;">&#12288;&#12288;门面模式的两个作用：1.简化类的接口；2.消除类与使用它的客户代码之间的耦合。</span></span></p>
<p><span style="color: #3366ff;"><span style="color: #333333;">&#12288;&#12288;门面模式的使用目的就是图方面。</span></span></p>
<p><span style="color: #3366ff;"><span style="color: #333333;">&#12288;&#12288;想象一下计算机桌面上的那些快捷方式图标，它们就是在扮演一个把用户引导至某个地方的接口的角色，每次操作都是间接的执行一些幕后的命令。</span></span></p>
<p><span style="color: #3366ff;"><span style="color: #333333;">&#12288;&#12288;你在看这篇的博客的时候我就假设你已经有JavaScript的使用经验了，那么你一定写过或者看过这样的代码：</span></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> addEvent </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(el,type,fn){<br></span><span style="color: #008080;">2</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">if</span><span style="color: #000000;">(window.addEventListener){<br></span><span style="color: #008080;">3</span> <span style="color: #000000;">      &#12288;&#12288;el.addEventListener(type,fn);<br></span><span style="color: #008080;">4</span> <span style="color: #000000;">   &#12288;&#12288;}</span><span style="color: #0000ff;">else</span><span style="color: #0000ff;">if</span><span style="color: #000000;">(window.attachEvent){<br></span><span style="color: #008080;">5</span> <span style="color: #000000;">      &#12288;&#12288;el.attachEvent(</span><span style="color: #000000;">'</span><span style="color: #000000;">on</span><span style="color: #000000;">'</span><span style="color: #000000;">+</span><span style="color: #000000;">type,fn);<br></span><span style="color: #008080;">6</span> <span style="color: #000000;">   &#12288;&#12288;}</span><span style="color: #0000ff;">else</span><span style="color: #000000;">{<br></span><span style="color: #008080;">7</span> <span style="color: #000000;">      &#12288;&#12288;el[</span><span style="color: #000000;">'</span><span style="color: #000000;">on</span><span style="color: #000000;">'</span><span style="color: #000000;">+</span><span style="color: #000000;">type] </span><span style="color: #000000;">=</span><span style="color: #000000;"> fn;<br></span><span style="color: #008080;">8</span> <span style="color: #000000;">   &#12288;&#12288;}<br></span><span style="color: #008080;">9</span> &#12288;&#12288;<span style="color: #000000;">}</span></pre>
</div>
<p>&nbsp;</p>
<p>&#12288;&#12288;这个就是一个JavaScript中常见的事件监听器函数，这个函数就是一个基本的门面，有了它，就有了为DOM节点添加事件监听器的简便方法。</p>
<p>&#12288;&#12288;现在要说门面模式的精华部分了，为什么说JavaScript库几乎都会用这种模式类。假如现在要设计一个库，那么最好把其中所有的工具元素放在一起，这样更好用，访问起来更简便。看代码：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #008000;">//_</span><span style="color: #008000;">model.util是一个命名空间</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 2</span> &#12288;&#12288;<span style="color: #000000;">_myModel.util.Event </span><span style="color: #000000;">=</span><span style="color: #000000;"> {<br></span><span style="color: #008080;"> 3</span> <span style="color: #000000;">   &#12288;&#12288;getEvent:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(e){<br></span><span style="color: #008080;"> 4</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #000000;"> e</span><span style="color: #000000;">||</span><span style="color: #000000;"> window.event;<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;">   &#12288;&#12288;},<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">   &#12288;&#12288;getTarget:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(e){<br></span><span style="color: #008080;"> 7</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #000000;"> e.target</span><span style="color: #000000;">||</span><span style="color: #000000;">e.srcElement;<br></span><span style="color: #008080;"> 8</span> <span style="color: #000000;">   &#12288;&#12288;},<br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">   &#12288;&#12288;preventDefault:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(e){<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">if</span><span style="color: #000000;">(e.preventDefault){<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">         &#12288;&#12288;e.preventDefault();<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">      &#12288;&#12288;}</span><span style="color: #0000ff;">else</span><span style="color: #000000;">{<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">         &#12288;&#12288;e.returnValue </span><span style="color: #000000;">=</span><span style="color: #0000ff;">false</span><span style="color: #000000;">;<br></span><span style="color: #008080;">14</span> <span style="color: #000000;">      &#12288;&#12288;}<br></span><span style="color: #008080;">15</span> <span style="color: #000000;">   &#12288;&#12288;}<br></span><span style="color: #008080;">16</span> &#12288;&#12288;<span style="color: #000000;">};<br></span><span style="color: #008080;">17</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">事件工具大概就是这么一个套路，然后结合addEvent函数使用</span><span style="color: #008000;"><br></span><span style="color: #008080;">18</span> &#12288;&#12288;<span style="color: #000000;">addEvent(document.getElementsByTagName(</span><span style="color: #000000;">'</span><span style="color: #000000;">body</span><span style="color: #000000;">'</span><span style="color: #000000;">)[</span><span style="color: #000000;">0</span><span style="color: #000000;">],</span><span style="color: #000000;">'</span><span style="color: #000000;">click</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(e){<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">   &#12288;&#12288;alert(_myModel.util.Event.getTarget(e));<br></span><span style="color: #008080;">20</span> &#12288;&#12288;<span style="color: #000000;">});</span></pre>
</div>
<p><span style="color: #3366ff;"><span style="color: #333333;">&#12288;&#12288;个人认为，在处理游览器差异问题时最好的解决办法就是把这些差异抽取的门面方法中，这样可以提供一个更一致的接口，addEvent函数就是一个例子。&nbsp;</span></span></p>
<p><span style="color: #3366ff;"><span style="color: #333333;">&nbsp;</span></span></p>
<p><span style="color: #3366ff; font-size: 16px;"><strong>&#12288;&#12288;适配置器（Adapter）模式：</strong></span><span style="color: #3366ff;"><span style="color: #000000;">将一个类的接口转换成客户希望的另外一个接口。适配器模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作，使用这种模式的对象又叫包装器，因为他们是在用一个新的接口包装另一个对象。</span></span></p>
<p>&#12288;&#12288;从表面上看，它和门面模式有点相似，差别在于它们如何改变接口，门面模式展现的是一个简化的接口，它并不提供额外的选择，而适配器模式则要把一个接口转换为另一个接口，它并不会滤除某些能力，也不会简化接口。先来一个简单的示例看看：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">假如有一个3个字符串参数的函数，但是现在拥有的却是一个包含三个字符串元素的对象，那么就可以用一个配置器来衔接二者</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 2</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> clientObject </span><span style="color: #000000;">=</span><span style="color: #000000;"> {<br></span><span style="color: #008080;"> 3</span> <span style="color: #000000;">   &#12288;&#12288;str1:</span><span style="color: #000000;">'</span><span style="color: #000000;">bat</span><span style="color: #000000;">'</span><span style="color: #000000;">,<br></span><span style="color: #008080;"> 4</span> <span style="color: #000000;">   &#12288;&#12288;str2:</span><span style="color: #000000;">'</span><span style="color: #000000;">foo</span><span style="color: #000000;">'</span><span style="color: #000000;">,<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;">   &#12288;&#12288;str3:</span><span style="color: #000000;">'</span><span style="color: #000000;">baz</span><span style="color: #000000;">'</span><span style="color: #000000;"><br></span><span style="color: #008080;"> 6</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;"> 7</span> &#12288;&#12288;<span style="color: #0000ff;">function</span><span style="color: #000000;"> interfaceMethod(str1,str2,str3){<br></span><span style="color: #008080;"> 8</span> &#12288;&#12288;&#12288;&#12288;alert(str1)<span style="color: #000000;"><br></span><span style="color: #008080;"> 9</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">10</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">配置器函数</span><span style="color: #008000;"><br></span><span style="color: #008080;">11</span> &#12288;&#12288;<span style="color: #0000ff;">function</span><span style="color: #000000;"> adapterMethod(o){<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">   &#12288;&#12288;interfaceMethod(o.str1, o.str2, o.str3);<br></span><span style="color: #008080;">13</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">14</span> &#12288;&#12288;<span style="color: #000000;">adapterMethod(clientObject)<br></span><span style="color: #008080;">15</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">adapterMethod函数的作为就在于对interfaceMethod函数进行包装，并把传递给它的参数转换为后者需要的形式。</span></pre>
</div>
<p>&#12288;&#12288;适配器模式的工作机制是：用一个新的接口对现有类得接口进行包装。</p>
<p>&#12288;&#12288;示例：适配两个库。下面的例子要实现的是从Prototype库的$函数到YUI的get方法的转换。</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">先看它们在接口方面的差别</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 2</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">Prototype $ function </span><span style="color: #008000;"><br></span><span style="color: #008080;"> 3</span> &#12288;&#12288;<span style="color: #0000ff;">function</span><span style="color: #000000;"> $(){<br></span><span style="color: #008080;"> 4</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">var</span><span style="color: #000000;"> elements </span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Array();<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">for</span><span style="color: #000000;">(</span><span style="color: #0000ff;">var</span><span style="color: #000000;"> i</span><span style="color: #000000;">=</span><span style="color: #000000;">0</span><span style="color: #000000;">;i</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">arguments.length;i</span><span style="color: #000000;">++</span><span style="color: #000000;">){<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">var</span><span style="color: #000000;"> element </span><span style="color: #000000;">=</span><span style="color: #000000;"> arguments[i];<br></span><span style="color: #008080;"> 7</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">if</span><span style="color: #000000;">(</span><span style="color: #0000ff;">typeof</span><span style="color: #000000;"> element </span><span style="color: #000000;">==</span><span style="color: #000000;">'</span><span style="color: #000000;">string</span><span style="color: #000000;">'</span><span style="color: #000000;">){<br></span><span style="color: #008080;"> 8</span> <span style="color: #000000;">         &#12288;&#12288;element </span><span style="color: #000000;">=</span><span style="color: #000000;"> document.getElementById(element);<br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">      &#12288;&#12288;}<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">if</span><span style="color: #000000;">(</span><span style="color: #0000ff;">typeof</span><span style="color: #000000;">.length </span><span style="color: #000000;">==</span><span style="color: #000000;">1</span><span style="color: #000000;">)    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> element;<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">      &#12288;&#12288;elements.push(element);<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">   &#12288;&#12288;}<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #000000;"> elements;<br></span><span style="color: #008080;">14</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">15</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">YUI get method</span><span style="color: #008000;"><br></span><span style="color: #008080;">16</span> &#12288;&#12288;<span style="color: #000000;">YAHOO.util.Dom.get </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(el){<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">if</span><span style="color: #000000;">(YAHOO.lang.isString(el)){<br></span><span style="color: #008080;">18</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #000000;"> document.getElementById(el);<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">   &#12288;&#12288;}<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">if</span><span style="color: #000000;">(YAHOO.lang.isArray(el)){<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">var</span><span style="color: #000000;"> c </span><span style="color: #000000;">=</span><span style="color: #000000;">[];<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">for</span><span style="color: #000000;">(</span><span style="color: #0000ff;">var</span><span style="color: #000000;"> i</span><span style="color: #000000;">=</span><span style="color: #000000;">0</span><span style="color: #000000;">,len</span><span style="color: #000000;">=</span><span style="color: #000000;">el.length;i</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">len;</span><span style="color: #000000;">++</span><span style="color: #000000;">i){<br></span><span style="color: #008080;">23</span> <span style="color: #000000;">         &#12288;&#12288;c[c.length] </span><span style="color: #000000;">=</span><span style="color: #000000;"> YAHOO.util.Dom.get(el[i]);<br></span><span style="color: #008080;">24</span> <span style="color: #000000;">      &#12288;&#12288;}<br></span><span style="color: #008080;">25</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #000000;"> c;<br></span><span style="color: #008080;">26</span> <span style="color: #000000;">   &#12288;&#12288;}<br></span><span style="color: #008080;">27</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">if</span><span style="color: #000000;">(el){<br></span><span style="color: #008080;">28</span> <span style="color: #000000;">      &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #000000;"> el;<br></span><span style="color: #008080;">29</span> <span style="color: #000000;">   &#12288;&#12288;}<br></span><span style="color: #008080;">30</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #0000ff;">null</span><span style="color: #000000;">;<br></span><span style="color: #008080;">31</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">32</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">二者区别就在于get具有一个参数，且可以是HTML,字符串或者数组；而$木有正是的参数，允许使用者传入任意数目的参数，不管HTML还是字符串。</span><span style="color: #008000;"><br></span><span style="color: #008080;">33</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">如果需要从使用Prototype的$函数改为使用YUI的get方法（或者相反，那么用适配器模式其实很简单）</span><span style="color: #008000;"><br></span><span style="color: #008080;">34</span> &#12288;&#12288;<span style="color: #0000ff;">function</span><span style="color: #000000;"> PrototypeToYUIAdapter(){<br></span><span style="color: #008080;">35</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #000000;"> YAHOO.util.Dom.get(arguments);<br></span><span style="color: #008080;">36</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">37</span> &#12288;&#12288;<span style="color: #0000ff;">function</span><span style="color: #000000;"> YUIToPrototypeAdapter(el){<br></span><span style="color: #008080;">38</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #000000;"> $.apply(window,el </span><span style="color: #0000ff;">instanceof</span><span style="color: #000000;"> Array</span><span style="color: #000000;">?</span><span style="color: #000000;">el:[el]);<br></span><span style="color: #008080;">39</span> &#12288;&#12288;<span style="color: #000000;">}</span></pre>
</div>
<p>&nbsp;</p>
<p style="margin-top: 10px; margin-right: auto; margin-bottom: 10px; margin-left: auto; text-indent: 0px;"><span style="color: #3366ff; font-size: 16px;"><strong>&#12288;&#12288;享元（Flyweight）模式：</strong></span><strong><span style="color: #3366ff;"><span style="color: #333333;">运用共享技术有效地支持大量细粒度的对象。</span></span></strong></p>
<p style="margin-top: 10px; margin-right: auto; margin-bottom: 10px; margin-left: auto; text-indent: 0px;"><span><span><span style="color: #333333;"><strong>&#12288;&#12288;享元模式可以避免大量非常相似类的开销。在程序设计中有时需要生成大量细粒度的类实例来表示数据。如果发现这些实例除了几个参数外基本伤都是相同的，有时就能够受大幅度第减少需要实例化的类的数量。如果能把这些参数移到类实例外面，在方法调用时将他们传递进来，就可以通过共享大幅度地减少单个实例的数目。</strong></span></span></span></p>
<p style="margin-top: 10px; margin-right: auto; margin-bottom: 10px; margin-left: auto; text-indent: 0px;"><span><span><span><span style="color: #333333;"><strong>&#12288;&#12288;从实际出发说说自己的理解吧。</strong></span></span></span></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #000000;"><strong>组成部分</strong><br></span><span style="color: #008080;"> 2</span> &#12288;&#12288;<span style="color: #000000;">“享元”：抽离出来的外部操作和数据；<br></span><span style="color: #008080;"> 3</span> &#12288;&#12288;<span style="color: #000000;">“工厂”：创造对象的工厂；<br></span><span style="color: #008080;"> 4</span> &#12288;&#12288;<span style="color: #000000;">“存储器”：存储实例对象的对象或数组，供“享元”来统一控制和管理。<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;"><br></span><span style="color: #008080;"> 6</span> &#12288;&#12288;<span style="color: #000000;"><strong>应用场景</strong><br></span><span style="color: #008080;"> 7</span> &#12288;&#12288;<span style="color: #000000;">1</span><span style="color: #000000;">. 页面存在大量资源密集型对象；<br></span><span style="color: #008080;"> 8</span> &#12288;&#12288;<span style="color: #000000;">2</span><span style="color: #000000;">. 这些对象具备一定的共性，可以抽离出公用的操作和数据<br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;"><br></span><span style="color: #008080;">10</span> &#12288;&#12288;<span style="color: #000000;"><strong>关键</strong><br></span><span style="color: #008080;">11</span> &#12288;&#12288;<span style="color: #000000;">1</span><span style="color: #000000;">. 合理划分内部和外部数据。<br></span><span style="color: #008080;">12</span> &#12288;&#12288;<span style="color: #000000;">既要保持每个对象的模块性、保证享元的独立、可维护，又要尽可能多的抽离外部数据。<br></span><span style="color: #008080;">13</span> &#12288;&#12288;<span style="color: #000000;">2</span><span style="color: #000000;">. 管理所有实例<br></span><span style="color: #008080;">14&#12288;&#12288;</span> <span style="color: #000000;">既然抽离出了外部数据和操作，那享元就必须可以访问和控制实例对象。在JavaScript这种动态语言中，这个需求是很容易实现的：我们可以把工厂生产出的对象简单的扔在一个数组中。为每个对象设计暴露给外部的方法，便于享元的控制。<br></span><span style="color: #008080;">15</span> <span style="color: #000000;"><br></span><span style="color: #008080;">16</span> &#12288;&#12288;<span style="color: #000000;"><strong>优点</strong><br></span><span style="color: #008080;">17</span> &#12288;&#12288;<span style="color: #000000;">1</span><span style="color: #000000;">. 将能耗大的操作抽离成一个，在资源密集型系统中，可大大减少资源和内存占用；<br></span><span style="color: #008080;">18</span> &#12288;&#12288;<span style="color: #000000;">2</span><span style="color: #000000;">. 职责封装，这些操作独立修改和维护；<br></span><span style="color: #008080;">19</span> <span style="color: #000000;"><br></span><span style="color: #008080;">20</span> &#12288;&#12288;<span style="color: #000000;"><strong>缺点</strong><br></span><span style="color: #008080;">21&#12288;&#12288;</span> <span style="color: #000000;">1</span><span style="color: #000000;">. 增加了实现复杂度。<br></span><span style="color: #008080;">22</span> &#12288;&#12288;<span style="color: #000000;">将原本由一个工厂方法实现的功能，修改为了一个享元</span><span style="color: #000000;">+</span><span style="color: #000000;">一个工厂</span><span style="color: #000000;">+</span><span style="color: #000000;">一个存储器。<br></span><span style="color: #008080;">23</span> &#12288;&#12288;<span style="color: #000000;">2</span><span style="color: #000000;">. 对象数量少的情况，可能会增大系统开销。</span></pre>
</div>
<p style="margin-top: 10px; margin-right: auto; margin-bottom: 10px; margin-left: auto; text-indent: 0px;">&nbsp;</p>
<p>&#12288;&#12288;示例：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">汽车登记示例</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 2</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> Car </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(make,model,year,owner,tag,renewDate){<br></span><span style="color: #008080;"> 3</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">this</span><span style="color: #000000;">.make</span><span style="color: #000000;">=</span><span style="color: #000000;">make;<br></span><span style="color: #008080;"> 4</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">this</span><span style="color: #000000;">.model</span><span style="color: #000000;">=</span><span style="color: #000000;">model;<br></span><span style="color: #008080;"> 5</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">this</span><span style="color: #000000;">.year</span><span style="color: #000000;">=</span><span style="color: #000000;">year;</span><br><span style="color: #008080;"> 6</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">this</span><span style="color: #000000;">.owner</span><span style="color: #000000;">=</span><span style="color: #000000;">owner;</span><br><span style="color: #008080;"> 7</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">this</span><span style="color: #000000;">.tag</span><span style="color: #000000;">=</span><span style="color: #000000;">tag;</span><br><span style="color: #008080;"> 8</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">this</span><span style="color: #000000;">.renewDate</span><span style="color: #000000;">=</span><span style="color: #000000;">renewDate;</span><br><span style="color: #008080;"> 9</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">10</span> &#12288;&#12288;<span style="color: #000000;">Car.prototype </span><span style="color: #000000;">=</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">11</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">getMake:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){</span><br><span style="color: #008080;">12</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">return</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.make;</span><br><span style="color: #008080;">13</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">},<br></span><span style="color: #008080;">14</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">getModel:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;">15</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">return</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.model;</span><br><span style="color: #008080;">16</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">},<br></span><span style="color: #008080;">17</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">getYear:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){</span><br><span style="color: #008080;">18</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">return</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.year;</span><br><span style="color: #008080;">19</span> &#12288;&#12288;&#12288;&#12288;},<br><span style="color: #008080;">20</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">transferOwner:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(owner,tag,renewDate){</span><br><span style="color: #008080;">21</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">this</span><span style="color: #000000;">.owner</span><span style="color: #000000;">=</span><span style="color: #000000;">owner;</span><br><span style="color: #008080;">22</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">this</span><span style="color: #000000;">.tag</span><span style="color: #000000;">=</span><span style="color: #000000;">tag;</span><br><span style="color: #008080;">23</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">this</span><span style="color: #000000;">.renewDate</span><span style="color: #000000;">=</span><span style="color: #000000;">renewDate;</span><br><span style="color: #008080;">24</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">},<br></span><span style="color: #008080;">25</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">renewRegistration:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(renewDate){<br></span><span style="color: #008080;">26</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">this</span><span style="color: #000000;">.renewDate</span><span style="color: #000000;">=</span><span style="color: #000000;">renewDate;</span><br><span style="color: #008080;">27</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">28</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">29</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">数据量小到没多大的影响，数据量大的时候对计算机内存会产生压力，下面介绍享元模式优化后</span><span style="color: #008000;"><br></span><span style="color: #008080;">30</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">包含核心数据的Car类</span><span style="color: #008000;"><br></span><span style="color: #008080;">31</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> Car</span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(make,model,year){<br></span><span style="color: #008080;">32</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">this</span><span style="color: #000000;">.make</span><span style="color: #000000;">=</span><span style="color: #000000;">make;<br></span><span style="color: #008080;">33</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">this</span><span style="color: #000000;">.model</span><span style="color: #000000;">=</span><span style="color: #000000;">model;<br></span><span style="color: #008080;">34</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">this</span><span style="color: #000000;">.year</span><span style="color: #000000;">=</span><span style="color: #000000;">year;<br></span><span style="color: #008080;">35</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">36</span> &#12288;&#12288;<span style="color: #000000;">Car.prototype</span><span style="color: #000000;">=</span><span style="color: #000000;">{<br></span><span style="color: #008080;">37</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">getMake:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;">38</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">return</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.make;<br></span><span style="color: #008080;">39</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">},<br></span><span style="color: #008080;">40</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">getModel:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;">41</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">return</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.model;<br></span><span style="color: #008080;">42</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">},<br></span><span style="color: #008080;">43</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">getYear:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;">44</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">return</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.year;</span><br><span style="color: #008080;">45</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">46</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">47</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">中间对象，用来实例化Car类</span><span style="color: #008000;"><br></span><span style="color: #008080;">48</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> CarFactory</span><span style="color: #000000;">=</span><span style="color: #000000;">(</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;">49</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> createdCars </span><span style="color: #000000;">=</span><span style="color: #000000;"> {};</span><br><span style="color: #008080;">50</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">return</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">51</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">createCar:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(make,model,year){<br></span><span style="color: #008080;">52</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> car</span><span style="color: #000000;">=</span><span style="color: #000000;">createdCars[make</span><span style="color: #000000;">+</span><span style="color: #000000;">"</span><span style="color: #000000;">-</span><span style="color: #000000;">"</span><span style="color: #000000;">+</span><span style="color: #000000;">model</span><span style="color: #000000;">+</span><span style="color: #000000;">"</span><span style="color: #000000;">-</span><span style="color: #000000;">"</span><span style="color: #000000;">+</span><span style="color: #000000;">year];<br></span><span style="color: #008080;">53</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">return</span><span style="color: #000000;"> car </span><span style="color: #000000;">?</span><span style="color: #000000;"> car : createdCars[make </span><span style="color: #000000;">+</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">+</span><span style="color: #000000;"> model </span><span style="color: #000000;">+</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">+</span><span style="color: #000000;"> year] </span><span style="color: #000000;">=</span><span style="color: #000000;">(</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Car(make,model,year));<br></span><span style="color: #008080;">54</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">55</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">56</span> &#12288;&#12288;<span style="color: #000000;">})();<br></span><span style="color: #008080;">57</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">数据工厂，用来处理Car的实例化和整合附加数据</span><span style="color: #008000;"><br></span><span style="color: #008080;">58</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> CarRecordManager </span><span style="color: #000000;">=</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">function</span><span style="color: #000000;">() {<br></span><span style="color: #008080;">59</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> carRecordDatabase </span><span style="color: #000000;">=</span><span style="color: #000000;"> {};<br></span><span style="color: #008080;">60</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">return</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">61</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">addCarRecord:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(make,model,year,owner,tag,renewDate){</span><br><span style="color: #008080;">62</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> car </span><span style="color: #000000;">=</span><span style="color: #000000;"> CarFactory.createCar(make, model, year);</span><br><span style="color: #008080;">63</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">carRecordDatabase[tag]</span><span style="color: #000000;">=</span><span style="color: #000000;">{<br></span><span style="color: #008080;">64</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">owner:owner,<br></span><span style="color: #008080;">65</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;tag:tag,<br><span style="color: #008080;">66</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;renewDate:renewDate,<br><span style="color: #008080;">67</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;car:car<br><span style="color: #008080;">68</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">69</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">},<br></span><span style="color: #008080;">70</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">transferOwnership:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(tag, newOwner, newTag, newRenewDate){<br></span><span style="color: #008080;">71</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> record</span><span style="color: #000000;">=</span><span style="color: #000000;">carRecordDatabase[tag];<br></span><span style="color: #008080;">72</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">record.owner </span><span style="color: #000000;">=</span><span style="color: #000000;"> newOwner;<br></span><span style="color: #008080;">73</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">record.tag </span><span style="color: #000000;">=</span><span style="color: #000000;"> newTag;<br></span><span style="color: #008080;">74</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">record.renewDate </span><span style="color: #000000;">=</span><span style="color: #000000;"> newRenewDate;<br></span><span style="color: #008080;">75</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">},<br></span><span style="color: #008080;">76</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">renewRegistration:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(tag,newRenewDate){<br></span><span style="color: #008080;">77</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">carRecordDatabase[tag].renewDate</span><span style="color: #000000;">=</span><span style="color: #000000;">newRenewDate;<br></span><span style="color: #008080;">78</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">},<br></span><span style="color: #008080;">79</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">getCarInfo:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(tag){<br></span><span style="color: #008080;">80</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #0000ff;">return</span><span style="color: #000000;"> carRecordDatabase[tag];<br></span><span style="color: #008080;">81</span> &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">82</span> &#12288;&#12288;&#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">83</span> &#12288;&#12288;<span style="color: #000000;">})();</span></pre>
</div>
<p><span style="color: #3366ff; font-size: 16px;"><strong>&#12288;&#12288;<br>&#12288;&#12288;代理（Proxy）模式：</strong></span><strong><span style="color: #000000;">此模式最基本的形式是对访问进行控制。代理对象和另一个对象（本体）实现的是同样的接口，可是实际上工作还是本体在做，它才是负责执行所分派的任务的那个对象或类，代理对象不会在另以对象的基础上修改任何方法，也不会简化那个对象的接口。</span></strong></p>
<p><strong><span style="color: #000000;">&#12288;&#12288;举一个具体的情况：如果那个对象在某个远端服务器上，直接操作这个对象因为网络速度原因可能比较慢，那我们可以先用Proxy来代替那个对象。<br>&#12288;&#12288;总之对于开销较大的对象，只有在使用它时才创建，这个原则可以为我们节省很多内存。《JS设计模式》上的图书馆示例：</span></strong></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> Publication </span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Interface(</span><span style="color: #000000;">'</span><span style="color: #000000;">Publication</span><span style="color: #000000;">'</span><span style="color: #000000;">, [</span><span style="color: #000000;">'</span><span style="color: #000000;">getIsbn</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">setIsbn</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">getTitle</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">setTitle</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">getAuthor</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">setAuthor</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">display</span><span style="color: #000000;">'</span><span style="color: #000000;">]);<br></span><span style="color: #008080;"> 2&#12288;&#12288;</span> <span style="color: #0000ff;">var</span><span style="color: #000000;"> Book </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(isbn, title, author) {<br></span><span style="color: #008080;"> 3</span> <span style="color: #000000;">   &#12288;&#12288; </span><span style="color: #008000;">//</span><span style="color: #008000;">...</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 4</span> &#12288;&#12288;<span style="color: #000000;">} <br></span><span style="color: #008080;"> 5</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;"> implements Publication</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 6</span> &#12288;&#12288;<span style="color: #000000;">implements(Book,Publication);<br></span><span style="color: #008080;"> 7</span> <span style="color: #000000;"><br></span><span style="color: #008080;"> 8</span> &#12288;&#12288;<span style="color: #008000;">/*</span><span style="color: #008000;"> Library interface. </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br></span><span style="color: #008080;"> 9</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> Library </span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Interface(</span><span style="color: #000000;">'</span><span style="color: #000000;">Library</span><span style="color: #000000;">'</span><span style="color: #000000;">, [</span><span style="color: #000000;">'</span><span style="color: #000000;">findBooks</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">checkoutBook</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">returnBook</span><span style="color: #000000;">'</span><span style="color: #000000;">]);<br></span><span style="color: #008080;">10</span> <span style="color: #000000;"><br></span><span style="color: #008080;">11</span> &#12288;&#12288;<span style="color: #008000;">/*</span><span style="color: #008000;"> PublicLibrary class. </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br></span><span style="color: #008080;">12</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> PublicLibrary </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(books) {<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">   &#12288;&#12288; </span><span style="color: #008000;">//</span><span style="color: #008000;">...</span><span style="color: #008000;"><br></span><span style="color: #008080;">14</span> &#12288;&#12288;<span style="color: #000000;">};<br></span><span style="color: #008080;">15</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;"> implements Library</span><span style="color: #008000;"><br></span><span style="color: #008080;">16</span> &#12288;&#12288;<span style="color: #000000;">implements(PublicLibrary,Library); <br></span><span style="color: #008080;">17</span> <span style="color: #000000;"><br></span><span style="color: #008080;">18</span> &#12288;&#12288;<span style="color: #000000;">PublicLibrary.prototype </span><span style="color: #000000;">=</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">   &#12288;&#12288; findBooks: </span><span style="color: #0000ff;">function</span><span style="color: #000000;">(searchString) {<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">      &#12288;&#12288; </span><span style="color: #008000;">//</span><span style="color: #008000;">...</span><span style="color: #008000;"><br></span><span style="color: #008080;">21</span> <span style="color: #000000;">    &#12288;&#12288;},<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">    &#12288;&#12288;checkoutBook: </span><span style="color: #0000ff;">function</span><span style="color: #000000;">(book) {<br></span><span style="color: #008080;">23</span> <span style="color: #000000;">     &#12288;&#12288;   </span><span style="color: #008000;">//</span><span style="color: #008000;">...</span><span style="color: #008000;"><br></span><span style="color: #008080;">24</span> <span style="color: #000000;">   &#12288;&#12288; },<br></span><span style="color: #008080;">25</span> <span style="color: #000000;">    &#12288;&#12288;returnBook: </span><span style="color: #0000ff;">function</span><span style="color: #000000;">(book) {<br></span><span style="color: #008080;">26</span> <span style="color: #000000;">      &#12288;&#12288;  </span><span style="color: #008000;">//</span><span style="color: #008000;">...</span><span style="color: #008000;"><br></span><span style="color: #008080;">27</span> <span style="color: #000000;">   &#12288;&#12288; }<br></span><span style="color: #008080;">28</span> &#12288;&#12288;<span style="color: #000000;">};<br></span><span style="color: #008080;">29</span> <span style="color: #000000;"><br></span><span style="color: #008080;">30</span> &#12288;&#12288;<span style="color: #008000;">/*</span><span style="color: #008000;"> PublicLibraryProxy class, a useless proxy. </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br></span><span style="color: #008080;">31</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> PublicLibraryProxy </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(catalog) { <br></span><span style="color: #008080;">32</span> <span style="color: #000000;">  &#12288;&#12288;  </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.library </span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> PublicLibrary(catalog);<br></span><span style="color: #008080;">33</span> &#12288;&#12288;<span style="color: #000000;">};<br></span><span style="color: #008080;">34</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;"> implements Library</span><span style="color: #008000;"><br></span><span style="color: #008080;">35</span> &#12288;&#12288;<span style="color: #000000;">implements(PublicLibraryProxy,Library);<br></span><span style="color: #008080;">36</span> <span style="color: #000000;"><br></span><span style="color: #008080;">37</span> &#12288;&#12288;<span style="color: #000000;">PublicLibraryProxy.prototype </span><span style="color: #000000;">=</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">38</span> <span style="color: #000000;">  &#12288;&#12288;  findBooks: </span><span style="color: #0000ff;">function</span><span style="color: #000000;">(searchString) {<br></span><span style="color: #008080;">39</span> <span style="color: #000000;">    &#12288;&#12288;    </span><span style="color: #0000ff;">return</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.library.findBooks(searchString);<br></span><span style="color: #008080;">40</span> <span style="color: #000000;">    &#12288;&#12288;},<br></span><span style="color: #008080;">41</span> <span style="color: #000000;">    &#12288;&#12288;checkoutBook: </span><span style="color: #0000ff;">function</span><span style="color: #000000;">(book) {<br></span><span style="color: #008080;">42</span> <span style="color: #000000;">     &#12288;&#12288;   </span><span style="color: #0000ff;">return</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.library.checkoutBook(book);<br></span><span style="color: #008080;">43</span> <span style="color: #000000;">   &#12288;&#12288; },<br></span><span style="color: #008080;">44</span> <span style="color: #000000;">   &#12288;&#12288; returnBook: </span><span style="color: #0000ff;">function</span><span style="color: #000000;">(book) {<br></span><span style="color: #008080;">45</span> <span style="color: #000000;">    &#12288;&#12288;    </span><span style="color: #0000ff;">return</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.library.returnBook(book);<br></span><span style="color: #008080;">46</span> <span style="color: #000000;">   &#12288;&#12288; }<br></span><span style="color: #008080;">47</span> &#12288;&#12288;<span style="color: #000000;">};</span></pre>
</div>
<p><strong><span style="color: #000000;">&nbsp;</span></strong></p>
<p><span style="color: #3366ff; font-size: 16px;"><strong>&#12288;&#12288;观察者（Observer）模式：</strong></span><span style="color: #000000;"><strong>定义对象间的一种一对多的依赖关系，以便当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并自动刷新。</strong></span></p>
<p><strong>&#12288;&#12288;观察者模式中存在两个角色,观察者和被观察者。在DOM的编程环境中的高级事件模式中，<span style="background-color: #fcd8df;">事件监听器说到底就是一种内置的观察者</span>。事件处理器(handler)和时间监听器(listener)并不是一回事，前者就是一种把事件传给与其关联的函数的手段，而在后者中，一个时间可以与几个监听器关联，每个监听器都能独立于其他监听器而改变。</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #008000;">//</span><span style="color: #008000;">使用时间监听器可以让多个函数相应一个事件</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 2</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> fn1 </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;"> 3</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #008000;">//</span><span style="color: #008000;">code</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 4</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;"> 5</span> &#12288;&#12288;<span style="color: #0000ff;">var</span><span style="color: #000000;"> fn2 </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(){<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #008000;">//</span><span style="color: #008000;">code</span><span style="color: #008000;"><br></span><span style="color: #008080;"> 7</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;"> 8</span> &#12288;&#12288;<span style="color: #000000;">addEvent(element,</span><span style="color: #000000;">'</span><span style="color: #000000;">click</span><span style="color: #000000;">'</span><span style="color: #000000;">,fn1)；<br></span><span style="color: #008080;"> 9</span> &#12288;&#12288;<span style="color: #000000;">addEvent(element,</span><span style="color: #000000;">'</span><span style="color: #000000;">click</span><span style="color: #000000;">'</span><span style="color: #000000;">,fn2)<br></span><span style="color: #008080;">10</span> <span style="color: #000000;"><br></span><span style="color: #008080;">11&#12288;&#12288;</span> <span style="color: #008000;">//</span><span style="color: #008000;">而时间处理函数就办不到</span><span style="color: #008000;"><br></span><span style="color: #008080;">12</span> &#12288;&#12288;<span style="color: #000000;">element.onclick </span><span style="color: #000000;">=</span><span style="color: #000000;"> fn1;<br></span><span style="color: #008080;">13</span> &#12288;&#12288;<span style="color: #000000;">element.onclick </span><span style="color: #000000;">=</span><span style="color: #000000;"> fn2;</span></pre>
</div>
<p>&#12288;&#12288;观察者模式是开发基于行为的应用程序的有力手段，前端程序员可做的就是借助一个事件监听器替你处理各种行为，从而降低内存消耗和提高互动性能。</p>
<p>&nbsp;</p>
<p><span style="color: #3366ff; font-size: 16px;"><strong>&#12288;&#12288;命令（Command）模式：</strong></span><span style="color: #000000;"><strong>将一个请求封装为一个对象，从而使你可用不同的请求对客户进行参数化；对请求排队或记录请求日志，以及支持可取消的操作。</strong></span></p>
<p><span style="color: #000000;"><strong>&#12288;&#12288;命令对象是一个操作和用来调用这个操作的对象的结合体，所有的命名对象都有一个执行操作，其用途就是调用命令对象所绑定的操作。</strong></span><strong>示例：</strong></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> &#12288;&#12288;<span style="color: #000000;">car Calculator</span><span style="color: #000000;">=</span><span style="color: #000000;">{<br></span><span style="color: #008080;"> 2</span> <span style="color: #000000;">   &#12288;&#12288;add:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(x,y){<br></span><span style="color: #008080;"> 3</span> <span style="color: #000000;">    &#12288;&#12288;  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> x</span><span style="color: #000000;">+</span><span style="color: #000000;">y;<br></span><span style="color: #008080;"> 4</span> <span style="color: #000000;">   &#12288;&#12288;},<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;">   &#12288;&#12288;substract:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(x,y){<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    &#12288;&#12288;  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> x</span><span style="color: #000000;">-</span><span style="color: #000000;">y;<br></span><span style="color: #008080;"> 7</span> <span style="color: #000000;">   &#12288;&#12288;},<br></span><span style="color: #008080;"> 8</span> <span style="color: #000000;">   &#12288;&#12288;multiply:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(x,y){<br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">    &#12288;&#12288;  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> x</span><span style="color: #000000;">*</span><span style="color: #000000;">y;<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">   &#12288;&#12288;},<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">   &#12288;&#12288;divide:</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(x,y){<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">    &#12288;&#12288;  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> x</span><span style="color: #000000;">/</span><span style="color: #000000;">y;</span><span style="color: #000000;"><br></span><span style="color: #008080;">13</span> <span style="color: #000000;">   &#12288;&#12288;}<br></span><span style="color: #008080;">14</span> &#12288;&#12288;<span style="color: #000000;">}<br></span><span style="color: #008080;">15</span> &#12288;&#12288;<span style="color: #000000;">Calculator.calc </span><span style="color: #000000;">=</span><span style="color: #0000ff;">function</span><span style="color: #000000;">(command){<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">   &#12288;&#12288;</span><span style="color: #0000ff;">return</span><span style="color: #000000;"> Calculator[command.type](command.op1,command.opd2)<br></span><span style="color: #008080;">17</span> &#12288;&#12288;<span style="color: #000000;">};<br></span><span style="color: #008080;">18</span> &#12288;&#12288;<span style="color: #000000;">Calculator.calc({type:</span><span style="color: #000000;">'</span><span style="color: #000000;">add</span><span style="color: #000000;">'</span><span style="color: #000000;">,op1:</span><span style="color: #000000;">1</span><span style="color: #000000;">,op2:</span><span style="color: #000000;">1</span><span style="color: #000000;">});<br></span><span style="color: #008080;">19</span> &#12288;&#12288;<span style="color: #000000;">Calculator.calc({type:</span><span style="color: #000000;">'</span><span style="color: #000000;">substract</span><span style="color: #000000;">'</span><span style="color: #000000;">,op1:</span><span style="color: #000000;">5</span><span style="color: #000000;">,op2:</span><span style="color: #000000;">2</span><span style="color: #000000;">});<br></span><span style="color: #008080;">20</span> &#12288;&#12288;<span style="color: #000000;">Calculator.calc({type:</span><span style="color: #000000;">'</span><span style="color: #000000;">multiply</span><span style="color: #000000;">'</span><span style="color: #000000;">,op1:</span><span style="color: #000000;">5</span><span style="color: #000000;">,op2:</span><span style="color: #000000;">2</span><span style="color: #000000;">});<br></span><span style="color: #008080;">21</span> &#12288;&#12288;<span style="color: #000000;">Calculator.calc({type:</span><span style="color: #000000;">'</span><span style="color: #000000;">divide</span><span style="color: #000000;">'</span><span style="color: #000000;">,op1:</span><span style="color: #000000;">8</span><span style="color: #000000;">,op2:</span><span style="color: #000000;">4</span><span style="color: #000000;">});</span></pre>
</div>
<p><span style="font-weight: bold;" class="Apple-style-span">&#12288;&#12288;命名模式的主要用途是把调用对象（用户界面，API和代理等）与实现操作的对象隔离开，也就是说使对象间的互动方式需要更高的模块化时都可以用到这种模式。</span></p>
<p><span style="color: #000000;"><strong>&nbsp;</strong></span></p>
<p><span style="color: #3366ff; font-size: 16px;"><strong>&#12288;&#12288;职责链（Chain Of Responsibility）模式：</strong></span><span style="color: #000000;"><strong>为解除请求的发送者和接收者之间耦合，而使多个对象都有机会处理这个请求。将这些对象连成一条链，并沿着这条链传递该请求，直到有一个对象处理它。</strong></span></p>
<p><strong>&#12288;&#12288;职责链由多个不同类型的对象组成：发送者是发出请求的对象，而接收者则是接收请求并且对其进行处理或传递的对象，请求本身有时也是一个对象，它封装着与操作有关的所有数据。</strong></p>
<p><strong>&#12288;&#12288;典型的流程大致是：</strong></p>
<p>&#12288;&#12288;1.发送者知道链中第一个接收者，它向这个接收者发出请求。</p>
<p>&#12288;&#12288;2.每一个接收者都对请求进行分析，然后要么处理它，要么将其往下传。</p>
<p>&#12288;&#12288;3.每一个接收者知道的其他对象只有一个，即它在链中的下家。</p>
<p>&#12288;&#12288;4.如果没有任何接收者处理请求，那么请求将从链上离开，不同的实现对此也有不同的反应，一般会抛出一个错误。</p>
<p>&nbsp;</p>
<p><span style="font-size: 14px;"><strong>&nbsp;&#12288;&#12288;职责链模式的适用范围:</strong>1.有多个的对象可以处理一个请求，哪个对象处理该请求运行时刻自动确定；2.<span style="font-family: Verdana, Arial, Helvetica, sans-serif; white-space: pre; line-height: normal;" class="Apple-style-span">想在不明确指定接收者的情况下，向多个对象中的一个提交一个请求；3.</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif; white-space: pre; line-height: normal;" class="Apple-style-span">可处理一个请求的对象集合需要被动态指定。</span></span></p>
<p><span style="font-size: 14px;"><strong>&#12288;&#12288;确实对这种模式不了解，相关资料也较少，所以代码先不上了。看看大家对这个模式有木有什么好的理解或者能较好表达这种模式的代码，谢谢了。</strong></span></p>
<p>&nbsp;</p>
<p style="margin-top: 10px; margin-right: auto; margin-bottom: 10px; margin-left: auto; text-indent: 0px;"><span><span><span><span style="color: #333333;"><strong>&nbsp;</strong></span></span></span></span></p>
<p><span style="background-color: #ffff99; font-size: 14pt; color: #339966;"><strong>&#12288;&#12288;结束语：</strong></span></p>
<p>&#12288;&#12288;1.<strong>每种模式都有自己的优缺点</strong>，所以每种模式的正确使用还得看开发人员本身的功力；</p>
<p>&#12288;&#12288;2.就算不使用JavaScript设计模式一样可以写出 <strong>复杂的可使用</strong> 的代码，可是如果你想真正了解JavaScript面向对象能力，学习提高代码的模块化程度﹑可维护性﹑可靠性和效率，那么合理的运用JavaScript设计模式将会是一个优秀 <span style="color: #3366ff;"><strong>前端开发攻城湿</strong></span> 必备的能力。</p>
<p>&#12288;&#12288;终于在8月31日发了这篇博客，字很多，辛苦大家了...</p>
<p>&#12288;&#12288;最后，祝大家工作顺利。<br><br>&nbsp;</p></div>
